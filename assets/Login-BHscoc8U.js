import{u as x,b,a as f,i as j,r as w,k as S,l as P,j as e,m as y}from"./index-kuPgm23o.js";import"./LoginRequiredMessage-ChcW2L1u.js";import{P as N}from"./PageHeader-DojtT84v.js";import{z as d,u as v,t as L,I as p}from"./zod-D6sUtNLf.js";const E=d.object({email:d.string().min(1,{message:"Email is required field"}).email(),password:d.string().min(1,{message:"Password is required field"})}),k=()=>{let u=x();const s=b(),{loading:m,error:r,accessToken:a}=f(c=>c.auth),[l,t]=j();w.useEffect(()=>()=>{t(""),s(S())},[s]);const{register:o,handleSubmit:n,formState:{errors:i}}=v({mode:"onBlur",resolver:L(E)});return{accessToken:a,handleSubmit:n,onSubmit:async c=>{const{email:g,password:h}=c;s(P({email:g,password:h})).unwrap().then(()=>{u("/")})},register:o,formState:{errors:i},searchParams:l,loading:m,error:r}},I=()=>{var n,i;const{accessToken:u,handleSubmit:s,onSubmit:m,register:r,formState:{errors:a},searchParams:l,loading:t,error:o}=k();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-5 text-center text-mainColor md:font-semibold ",children:e.jsx(N,{title:"User Login"})}),e.jsxs("div",{className:"p-3 md:p-0 md:w-1/2 mx-auto",children:[e.jsx(y,{type:"login",size:"sm"}),e.jsxs("form",{onSubmit:s(m),children:[l.get("message")=="account_created"?e.jsxs("p",{className:"p-4 bg-green-100 border border-green-500 rounded-md mb-5",children:["Your account has been created. Now Login"," "]}):"",e.jsx(p,{name:"email",register:r,error:(n=a.email)==null?void 0:n.message,label:"Email",placeholder:"ex:jhon@mail.com"}),e.jsx(p,{name:"password",register:r,error:(i=a.password)==null?void 0:i.message,type:"password",label:"Password",placeholder:"Your Password"}),e.jsx("div",{className:"w-full flex justify-center items-center my-5",children:e.jsx("button",{type:"submit",className:"w-fit px-4 py-3 text-white rounded-md bg-blue-500 hover:bg-blue-700 focus:ring-4",disabled:t==="pending",children:t==="pending"?"loading...":"login"})}),o&&e.jsxs("p",{className:"text-red-600 text-sm",children:[" ",o," "]})]})]})]})};export{I as default};
